<!DOCTYPE html>
<html>

	<head>
		<meta name="renderer" content="webkit|ie-comp|ie-stand">
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
		<meta charset='utf-8'>
		<meta http-equiv="Cache-Control" content="no-siteapp" />
		<title>我的订单</title>
		<meta name="viewport" content="width=device-width,initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
		<meta http-equiv="Cache-Control" content="no-siteapp">
		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="mobile-web-app-capable" content="yes">
		<meta name="format-detection" content="telephone=no">
		<meta name="keywords" content="">
		<meta name="description" content="">
		<link rel="stylesheet" type="text/css" href="css/base.css" />
		<link rel="stylesheet" type="text/css" href="css/common.css" />
		<script src="js/jquery-1.8.3.min.js" type="text/javascript"></script>
		<script type="text/javascript" src="js/jquery.SuperSlide.2.1.js"></script>
			<script type="text/javascript" src="js/vue.js"></script>
        <script type="text/javascript" src="js/axios.min.js"></script>
		
		 
	</head>

	<body>
		<!--header star-->
		<div class="header clearfix">
			 <div th:include="index::.toubu"></div>
			  
		</div>
		<!--header end-->

		<!--navbar star-->
		<div class="navbar clearfix">
			<div class="content clearfix">
				<ul>
				<li ><a href="index">首页</a></li>
				<li><a href="mall">商城</a></li>
				<li><a href="special">一市一县</a></li>
				<li><a href="area">助力地区</a></li>
				</ul>
			</div>
		</div>
		<!--navbar end-->

		<!--Main-wrap-->
		<div class="main-wrap graybg">
			<div class="wrapper pt40 pb40 clearfix">
				<div class="fl slide-nav white-box">
					<ul>
						<li >
							<a href="user" class="db fs16">个人信息</a>
						</li>
						<li class="on">
							<a href="user_order" class="db fs16">我的订单</a>
						</li>
						 
						<li>
							<a href="user_address" class="db fs16">收货地址</a>
						</li>
						
						 
						
					</ul>
				</div>
				<div class="fr slide-show white-box"  >
					<div class="dark-tit clearfix">
						<h3 class="fl fs26">我的订单</h3>
						
					</div>
					<table class="table_1" >
						<tr>
							<th width="30%">商品信息</th>
							<th width="16%">单价（元）</th>
							<th width="15%">数量</th>
							<th width="15%">收货人</th>
							<th width="24%" rowspan="2">订单状态</th>
						</tr>
					</table>
				<div th:each="od:${pageInfo.list}"  > 
				  
					<table class="table_1 mt15" th:if="${od.oTotal}!=0" >
					 
						<tr >
							<th align="left" colspan="6">
								<p class="fs12"  >
								<span   th:text="'订单编号：'+ ${od.oId}+'　下单时间：'+ ${od.oCreatetime}"></span>
								<span class="fr pr10"  th:text="'订单总价：'+${od.oTotal}" ></span>
								 　 
								</p>
							</th>
						</tr> 
						
					  <ul  >
					     <li th:each="ord:${od.ordertail}" > 
						<tr  >
							<td width="30%">
								<p class="clearfix o-goods-info">
									<a href="#" class="fl"><span><img th:src="${ord.product.pImg}" alt=""></span></a>
									<span class="fl tit "  > </span>
								</p>
							</td>
							<td width="16%" align="center" th:text="'￥'+${ord.product.price}">1100</td>
							<td width="15%" align="center" th:text="${ord.dCount}"></td>
							<td width="15%"   align="center" th:text="${od.address.addName}">李东海</td>
							<td width="12%"   align="center" id="state"  >
							 
							    <p th:if="${od.oState==0}" th:text="未支付"></p>
 							    <p th:if="${od.oState==1}" th:text="已支付"></p>  
 							     <p th:if="${od.oState==2}" th:text="未发货"></p> 
 							      <p th:if="${od.oState==3}" th:text="已发货"></p> 
 							       <p th:if="${od.oState==4}" th:text="已收货"></p> 
 							        
 							        <p th:if="${od.oState==5}" th:text="已评价"></p> 
 							         <p th:if="${od.oState==6}" th:text="已退"></p> 
     						</td>
							
							<td width="12%"   align="center">
								<a type="button" class="a-sqsh green radius3" th:if="${od.oState}<4"  th:onclick="javascript:queren([[${od.oId}]],[[${od.oState}]] )">确认收货</a>
								<a type="button" class="a-sqsh green radius3 " id="show"  th:onclick="javascript:comment([[${ord.product.pId}]] )"  th:if="${od.oState}==4" >去评价</a>
								
							</td>
						</tr>
						 
						</li>
					   </ul>
					   
					</table>
					   
			 	 
               </div>
               <div class="page clearfix ta-right">
                     
						<a type="button" class="pre box-s"  th:href="@{/user_order(pageNum=${pageInfo.hasPreviousPage}?${pageInfo.prePage}:1)}">上一页</a>
						<span th:text="'第'+${pageInfo.pageNum}+'页'"></span>
						
						<a type="button" class="next box-s" th:href="@{/user_order(pageNum=${pageInfo.hasNextPage}?${pageInfo.nextPage}:${pageInfo.pages})}">下一页</a>

					</div> 
					 
					 <div   id="mask" >
                              <div class="alert-box radius8 ">
				               <h3 class="fs20">商品评价 </h3>
								<form action="">
									<textarea name="" id="ping" cols="60" rows="10"    placeholder="快来对商品做出评价吧！" style="margin:20px 20px;border:1px solid #D4D4D4"></textarea>
									<p class="mb20 clearfix">
									 
										<label class="fl"></label>
										<input type="button" value="取消"  th:onclick="javascript:cl()"  class="fl orange-but radius3 ml10"  style="float:right;margin-right:30px;color: #929292" >
										  
								 		<input type="button" value="提交评价"  class="fl orange-but radius3 ml10"   style="float:right;margin-right:30px;color: #929292" >
									</p>
								</form>
							</div>
							</div>
						 
					 <script>
					 function  exit(){

							axios.get("exit").then(res=>{
								 
								window.location.href=res.data.msg;
								
							})
						    }
					 
					  function queren(oId,oState){
						  
						  axios.get("updateoState?oId="+oId+"&oState="+oState).then(res=>{
		        				 
							  if(res.data.code==0){
		        					alert(res.data.msg);
		        				}
		        				if(res.data.code==1){
		        					
		        					window.location.reload();
		        				}
		        				
		        			})
					  }
					  
					  function comment(pId){
						  document.getElementById("mask").style.display = "block";
					  }
					  function cl(){
						 
						  document.getElementById("mask").style.display = "none";
						  document.getElementById("ping").value="";
					  }
					 
					 </script>
               
			</div>
			
		</div>
		<!--/end-->

                            
						
							 
		<!--footer star-->
	 <div class="weibu" th:include="index::.weibu"></div>
		<!--footer end-->
	</body>

</html>